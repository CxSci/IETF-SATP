@startuml

entity "G1" as sg
entity "G2" as rg
entity "Log Storage G1" as log
entity "Log Storage G2" as log2
autonumber

sg->log: writeLogEntry <stage2,2.2,init-2.2>

sg->rg: <stage2,2.2,init-2.2>


sg->sg: <color:red><&warning> Crash <&warning>

      rg->log2: writeLogEntry <exec-2.2>
          rg->rg: execute lock assertion broadcast (2.3)
          rg->log2: writeLogEntry <done-init>
          rg->log2: writeLogEntry <ack-init>
rg->sg: <1,2,init-validate-ack> \n discovers that G1 crashed \n via timeout
sg->sg: <color:green>Recover
sg->rg: <color:green> <1, 2, RECOVER>


    rg->sg: <1,3,RECOVER-UPDATE>
sg->log: getLogEntry(i) from decentralized log
    return  logEntries
sg->sg:  process log(logEntries,RECOVER)
sg->log: <1,4,writeLogEntry>

sg->rg: <1,5,RECOVER-UPDATE-ACK>
rg -> sg: <1,6,RECOVER-SUCESS>
sg->log: <1,7,init-validateNext>


@enduml